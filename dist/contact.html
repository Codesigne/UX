<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <link rel="manifest" href="https://codesigne.github.io/profile/dist/manifest.json" />
        <title>Prafull Karanje</title>
        <link rel="stylesheet" href="css/app.css" />
        <style type="text/css">
            nav {
                margin-top: -105px;
                display: flex;
                flex-direction: row;
                align-content: center;
                justify-content: center;
                align-items: center;
                font-size: 1.5rem;
            }
            nav a {
                padding: 0 20px;
                padding-bottom: 40px;
            }
            nav b {
                /*padding: 0 20px;*/
                padding-top: 40px;
            }
        </style>
    </head>

    <body class="font--Poiret">
        <main>
            <section class="page--home">
                <div class="my">
                    <div class="my__name font--Poiret">Thank you for your time reviewing my work. If you‚Äôd like tosee more or get in touch, my contact information is provided below.</div>

                    <div class="my__identity font--Fjalla"><b>Email: </b><a href="mailto:prafullkaranje@gmail.com">prafullkaranje@gmail.com</a></div>
                </div>
                <nav>
                    <a href="">Resume</a>
                    <b><a href="./index.html">Home</a></b>
                    <a href="">Contact</a>
                </nav>
            </section>
        </main>
    </body>
    <script>
        // register ServiceWorker, remember to use absolute path!
        //   if (navigator.serviceWorker) {
        //     navigator.serviceWorker.register('/profile/dist/sw.js', {scope: '/profile/dist/'})
        //   }
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", function () {
                navigator.serviceWorker
                    .register("/profile/dist/sw.js", {
                        scope: ".", // THIS IS REQUIRED FOR RUNNING A PROGRESSIVE WEB APP FROM A NON_ROOT PATH
                    })
                    .then(
                        function (registration) {
                            // Registration was successful
                            console.log("ServiceWorker registration successful with scope: ", registration.scope);
                        },
                        function (err) {
                            // registration failed :(
                            console.log("ServiceWorker registration failed: ", err);
                        }
                    );
            });
        } else {
            console.log("ServiceWorker not in navigatore:");
        }
        // --- Application code here ---

        var divInstall = document.querySelectorAll("#install_p a")[0];
        window.addEventListener("beforeinstallprompt", (event) => {
            // Prevent the mini-infobar from appearing on mobile.
            event.preventDefault();
            console.log("üëç", "beforeinstallprompt", event);
            // Stash the event so it can be triggered later.
            window.deferredPrompt = event;

            // Remove the 'hidden' class from the install button container.

            console.log("divInstall :", divInstall);
            divInstall.classList.toggle("hidden", false);
        });

        var butInstall = document.querySelectorAll("#install_p a")[0];

        butInstall.addEventListener("click", async () => {
            console.log("üëç", "butInstall-clicked");
            const promptEvent = window.deferredPrompt;
            if (!promptEvent) {
                // The deferred prompt isn't available.
                alert("Alraedy installed");
                return;
            }
            // Show the install prompt.
            promptEvent.prompt();
            // Log the result
            const result = await promptEvent.userChoice;
            console.log("üëç", "userChoice", result);
            // Reset the deferred prompt variable, since
            // prompt() can only be called once.
            window.deferredPrompt = null;
            // Hide the install button.
            divInstall.classList.toggle("hidden", true);
        });
        window.addEventListener("appinstalled", (event) => {
            console.log("üëç", "appinstalled", event);
            // Clear the deferredPrompt so it can be garbage collected
            window.deferredPrompt = null;
        });

        const el = document.querySelector(".j__trigger_notf");
        el.addEventListener(
            "click",
            function (e) {
                console.log("e :", e);
                navigator.serviceWorker.controller.postMessage({
                    type: "USERLOGON_1",
                    data: {
                        new_posts: [
                            {
                                id: "1181",
                                php_punch: "2022-01-29 16:07:25.000",
                                emp_id: "549",
                                punched_by: "549",
                                type: "3",
                                created_on: "2022-01-29 16:08:29.250",
                                updated_on: null,
                                is_deleted: "0",
                            },
                        ],
                        error: 0,
                    },
                });
            },
            false
        );
    </script>
</html>
